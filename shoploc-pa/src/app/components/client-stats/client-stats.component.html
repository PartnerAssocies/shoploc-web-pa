<div class="card-header">
    <div class="row">
        <div class="col-2 float-left">
            <button mat-icon-button (click)="back()" class="float-left">
                <mat-icon>keyboard_arrow_left</mat-icon>
            </button>
        </div>
        <div class="col-10 float-left">
            <p class="mb-0 h4 text-align-left pb-0 pt-1 float-left">Mes stats</p>
        </div>
    </div>
</div>

<div class="all-container">
    <p-card [header]="authentifiedUser" class="card-style" *ngIf="infos">
        <ng-template pTemplate="header">
        </ng-template>
        <p *ngIf="infos.joursRestant>0"><span class="vfp_number">{{infos.joursRestant}}</span> jours avant VFP</p>
        <p *ngIf="infos.joursRestant<=0" style="color: green">VFP</p>
    </p-card>

    <p-card header="Soldes" class="card-style" *ngIf="infos">
        <ng-template pTemplate="header">
        </ng-template>
        <p>Solde fidélité : {{infos.soldeFidelite}} points</p>
        <p>Total collecté : {{infos.totalFidelite}} points</p>
    </p-card>

    <p-card header="Historiques" class="card-style" *ngIf="infos">
        <ng-template pTemplate="header">
        </ng-template>
        <p-accordion>
            <p-accordionTab header="Historique des achats">
                <ng-template pTemplate="content">
                    <p-table [columns]="cols" [value]="histoAchats" [scrollable]="true" [rows]="100" scrollHeight="250px"
                        [virtualScroll]="true" [virtualRowHeight]="34">
                        <ng-template pTemplate="header" let-columns>
                            <tr>
                                <th *ngFor="let col of columns">
                                    {{col.header}}
                                </th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-rowData let-columns="columns">
                            <tr style="height:34px">
                                <td *ngFor="let col of columns" style="word-wrap: break-word;">
                                    {{rowData[col.field]}}
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </ng-template>
            </p-accordionTab>
            <p-accordionTab header="Historique des click & collect">
                <ng-template pTemplate="content">
                    <p-table [columns]="cols" [value]="histoAchats" [scrollable]="true" [rows]="100" scrollHeight="250px"
                        [virtualScroll]="true" [virtualRowHeight]="34">
                        <ng-template pTemplate="header" let-columns>
                            <tr>
                                <th *ngFor="let col of columns">
                                    {{col.header}}
                                </th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-rowData let-columns="columns">
                            <tr style="height:34px">
                                <td *ngFor="let col of columns" style="word-wrap: break-word;">
                                    {{rowData[col.field]}}
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </ng-template>
            </p-accordionTab>
            <p-accordionTab header="Historique de points collectés et des cadeaux obtenus">
                <ng-template pTemplate="content">
                    <p-table [columns]="cols" [value]="histoClickAndCollect" [scrollable]="true" [rows]="100" scrollHeight="250px"
                        [virtualScroll]="true" [virtualRowHeight]="34">
                        <ng-template pTemplate="header" let-columns>
                            <tr>
                                <th *ngFor="let col of columns">
                                    {{col.header}}
                                </th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-rowData let-columns="columns">
                            <tr style="height:34px">
                                <td *ngFor="let col of columns" style="word-wrap: break-word;">
                                    {{rowData[col.field]}}
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </ng-template>
            </p-accordionTab>
        </p-accordion>   
    </p-card>

</div>

<div class="btn-container">
    <p-button class=btn-style label="Mois" (click)="updateCharts('MOIS')"></p-button>
    <p-button class=btn-style label="Annee" (click)="updateCharts('ANNEE')"></p-button>
    <p-button class=btn-style label="5 ans" (click)="updateCharts('ANNEES')"></p-button>
</div>

<div style="text-align:center;">
    <apx-chart
      [series]="chartOptions.series"
      [chart]="chartOptions.chart"
      [xaxis]="chartOptions.xaxis"
      [title]="chartOptions.title"
    ></apx-chart>
</div>

<div style="text-align:center; padding-bottom: 15%;">
    <apx-chart
      [series]="chartOptions2.series"
      [chart]="chartOptions2.chart"
      [xaxis]="chartOptions2.xaxis"
      [title]="chartOptions2.title"
    ></apx-chart>
</div>

<app-navbar></app-navbar>